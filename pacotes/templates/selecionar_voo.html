{% extends "base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'pacote_detalhes.css' %}">
<link rel="stylesheet" href="{% static 'cards.css' %}">
<div class="container my-5 pacote-detalhes">

  <!-- Cabeçalho -->
  <div class="text-center mb-5">
    <h2>Escolha o voo para o pacote:</h2>
    <h3 class="mt-3">{{ pacote.nome }}</h3>
    <p><strong>Datas:</strong> {{ pacote.data_inicio }} → {{ pacote.data_fim }}</p>
    <p><strong>Preço total:</strong> €{{ pacote.preco_total }}</p>
  </div>

  <hr class="mb-5">

  <!-- Lista de voos -->
  <div class="row gy-4">
    {% for voo in voos %}
    <div class="col-md-6">
      <div class="package-card shadow-sm rounded-3 border-0 p-4" style="overflow:hidden; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">
        
        <div class="package-body">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <div>
              <h5 class="package-title mb-1">{{ voo.companhia }}</h5>
              <p class="text-muted mb-0">Voo #{{ voo.numero_voo }}</p>
            </div>
            <div class="text-end">
              <p class="package-price text-primary fw-bold mb-0">
                €{{ voo.preco }}
              </p>
            </div>
          </div>

          <hr class="my-3">

          <div class="voo-info">
            <div class="mb-2">
              <strong>Destino:</strong> {{ voo.destino.nome }}, {{ voo.destino.pais }}
            </div>
            <div class="mb-2">
              <strong>Partida:</strong> {{ voo.data_saida|date:"d/m/Y H:i" }}
            </div>
            <div class="mb-2">
              <strong>Chegada:</strong> {{ voo.data_chegada|date:"d/m/Y H:i" }}
            </div>
          </div>

          <div class="d-grid mt-4">
            <a href="{% url 'confirmar_voo' voo.voo_id pacote.pacote_id hotel.hotel_id %}" 
               class="btn-select-hotel">
              Selecionar Voo
            </a>
          </div>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="alert alert-info text-center">
        <p class="mb-0">Não há voos disponíveis para este pacote no momento.</p>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Botão voltar -->
  <div class="text-center mt-5">
    <a href="{% url 'reserva_pacote' pacote.pacote_id %}" class="btn btn-secondary">
      ← Voltar para seleção de hotel
    </a>
  </div>

</div>

<style>
.voo-info {
  background-color: white;
  padding: 15px;
  border-radius: 8px;
  border-left: 4px solid #0d6efd;
}

.btn-select-hotel {
  background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%);
  color: white;
  padding: 12px 24px;
  border-radius: 8px;
  text-decoration: none;
  text-align: center;
  font-weight: 600;
  border: none;
  transition: transform 0.2s, box-shadow 0.2s;
  display: block;
}

.btn-select-hotel:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(13, 110, 253, 0.4);
  color: white;
}
</style>

{% endblock %}
