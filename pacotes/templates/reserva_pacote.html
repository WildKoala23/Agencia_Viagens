{% extends "base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'pacote_detalhes.css' %}">
<link rel="stylesheet" href="{% static 'cards.css' %}">
<div class="container my-5 pacote-detalhes">

  <!-- Cabeçalho -->
  <div class="text-center mb-5">
    <h2>Escolha o hotel para o pacote:</h2>
    <h3 class="mt-3">{{ pacote.nome }}</h3>
    <p><strong>Datas:</strong> {{ pacote.data_inicio }} → {{ pacote.data_fim }}</p>
    <p><strong>Preço total:</strong> €{{ pacote.preco_total }}</p>
  </div>

  <hr class="mb-5">

  <!-- Lista de hotéis -->
  <div class="row gy-4">
    {% for hotel in hoteis %}
    <div class="col-md-4">
      <div class="package-card shadow-sm rounded-3 border-0" style="overflow:hidden;">
        <div class="package-image">
          {% if hotel.imagem %}
            <img src="/media/{{ hotel.imagem }}" alt="{{ hotel.nome }}"
                 class="img-fluid rounded-top" style="width:100%; height:220px; object-fit:cover;">
          {% else %}
            <img src="{% static 'default_hotel.jpg' %}" alt="Sem imagem"
                 class="img-fluid rounded-top" style="width:100%; height:220px; object-fit:cover;">
          {% endif %}
        </div>

        <div class="package-body p-3">
          <h5 class="package-title mb-1">{{ hotel.nome }}</h5>
          {% if hotel.endereco %}
            <p class="package-location text-muted mb-2">{{ hotel.endereco }}</p>
          {% endif %}
          <p class="package-duration mb-2">{{ hotel.descricao_item|truncatewords:15 }}</p>
          <p class="package-price text-primary fw-bold mb-3">
            Desde {{ hotel.preco_diario }}€ / noite
          </p>

         <div class="d-grid">
  <a href="{% url 'hotel_detalhes' hotel.hotel_id %}?pacote={{ pacote.pacote_id }}" 
     class="btn-details">
    Ver Detalhes
  </a>
  <a href="{% url 'selecionar_hotel' hotel.hotel_id pacote.pacote_id %}" 
     class="btn-select-hotel">
    Selecionar Hotel
  </a>
</div>
        </div>
      </div>
    </div>
    {% empty %}
      <div class="col-12 text-center">
        <p>❌ Nenhum hotel disponível para este pacote.</p>
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
